use strict;
use warnings;
use Test::More;

plan tests => 6;
plan skip_all => 'unset NO_TEST to enable this test' if $ENV{NO_TEST};

use lib 'lib';
use Bean;

my $l = League->new( leagueId => 't/league' );
my $h = Homework->new( league => $l );

is( $h->hwdir, 't/league/homework', 'hwdirectory' );
is_deeply( $h->rounds, [6..14,16,17], 'homework rounds' );
is_deeply( $h->hwbyround, {
           6  => {
N9561713 => 0, N9561725 => 0, N9561741 => 0, N9561759 => 1, N9561761 => 0, N9561764 => 2, U9693001 => 0, U9693002 => 2, U9693003 => 0, U9693004 => 0, U9693005 => 0, U9693006 => 0, U9693007 => 2, U9693008 => 0, U9693009 => 2, U9693011 => 2, U9693012 => 2, U9693013 => 2, U9693015 => 0, U9693016 => 2, U9693017 => 2, U9693018 => 2, U9693020 => 2, U9693021 => 2, U9693022 => 0, U9693023 => 2, U9693024 => 0, U9693025 => 2, U9693028 => 2, U9693029 => 0, U9693030 => 0, U9693031 => 0, U9693032 => 2, U9693033 => 0, U9693034 => 3, U9693035 => 0, U9693036 => 2, U9693037 => 2, U9693038 => 0, U9693039 => 0, U9693040 => 3, U9693041 => 3, U9693042 => 2, U9693043 => 0, U9693044 => 2, U9693045 => 3, U9693046 => 3, U9693047 => 2, U9693048 => 2, U9693050 => 0, U9693052 => 2, U9693053 => 2, U9693054 => 2, U9693055 => 0 },
	7  => {
N9561713 => 0, N9561725 => 2, N9561741 => 2, N9561759 => 2, N9561761 => 2, N9561764 => 2, U9693001 => 2, U9693002 => 2, U9693003 => 2, U9693004 => 1, U9693005 => 2, U9693006 => 2, U9693007 => 2, U9693008 => 0, U9693009 => 2, U9693011 => 2, U9693012 => 0, U9693013 => 2, U9693015 => 2, U9693016 => 2, U9693017 => 2, U9693018 => 2, U9693020 => 2, U9693021 => 2, U9693022 => 1, U9693023 => 0, U9693024 => 0, U9693025 => 2, U9693028 => 2, U9693029 => 0, U9693030 => 2, U9693031 => 2, U9693032 => 2, U9693033 => 2, U9693034 => 2, U9693035 => 2, U9693036 => 1, U9693037 => 2, U9693038 => 2, U9693039 => 2, U9693040 => 2, U9693041 => 2, U9693042 => 2, U9693043 => 2, U9693044 => 2, U9693045 => 2, U9693046 => 2, U9693047 => 2, U9693048 => 2, U9693050 => 1, U9693052 => 2, U9693053 => 2, U9693054 => 2, U9693055 => 0 },
           8  => { N9561713 => 0, N9561725 => 0, N9561741 => 0, N9561759 => 2, N9561761 => 2, N9561764 => 2, U9693001 => 2, U9693002 => 2, U9693003 => 2, U9693004 => 0, U9693005 => 0, U9693006 => 2, U9693007 => 2, U9693008 => 0, U9693009 => 2, U9693011 => 2, U9693012 => 2, U9693013 => 2, U9693015 => 0, U9693016 => 2, U9693017 => 2, U9693018 => 0, U9693020 => 2, U9693021 => 2, U9693022 => 0, U9693023 => 2, U9693024 => 0, U9693025 => 2, U9693028 => 2, U9693029 => 0, U9693030 => 2, U9693031 => 2, U9693032 => 0, U9693033 => 2, U9693034 => 2, U9693035 => 0, U9693036 => 0, U9693037 => 2, U9693038 => 0, U9693039 => 0, U9693040 => 2, U9693041 => 2, U9693042 => 2, U9693043 => 0, U9693044 => 2, U9693045 => 2, U9693046 => 2, U9693047 => 2, U9693048 => 2, U9693050 => 0, U9693052 => 2, U9693053 => 2, U9693054 => 2, U9693055 => 0 },
           9  => {
N9561713 => 0, N9561725 => 0, N9561741 => 0, N9561759 => 2, N9561761 => 2, N9561764 => 2, U9693001 => 0, U9693002 => 2, U9693003 => 2, U9693004 => 0, U9693005 => 0, U9693006 => 0, U9693007 => 0, U9693008 => 0, U9693009 => 2, U9693011 => 2, U9693012 => 0, U9693013 => 2, U9693015 => 0, U9693016 => 2, U9693017 => 2, U9693018 => 0, U9693020 => 2, U9693021 => 2, U9693022 => 2, U9693023 => 2, U9693024 => 0, U9693025 => 2, U9693028 => 0, U9693029 => 0, U9693030 => 2, U9693031 => 2, U9693032 => 0, U9693033 => 2, U9693034 => 2, U9693035 => 2, U9693036 => 0, U9693037 => 2, U9693038 => 2, U9693039 => 0, U9693040 => 2, U9693041 => 2, U9693042 => 2, U9693043 => 0, U9693044 => 2, U9693045 => 2, U9693046 => 2, U9693047 => 0, U9693048 => 2, U9693050 => 0, U9693052 => 2, U9693053 => 2, U9693054 => 2, U9693055 => 0 },
           10 => {
N9561713 => 0, N9561725 => 2, N9561741 => 0, N9561759 => 2, N9561761 => 2, N9561764 => 2, U9693001 => 0, U9693002 => 0, U9693003 => 2, U9693004 => 0, U9693005 => 0, U9693006 => 2, U9693007 => 0, U9693008 => 0, U9693009 => 2, U9693011 => 2, U9693012 => 0, U9693013 => 2, U9693015 => 2, U9693016 => 2, U9693017 => 2, U9693018 => 2, U9693020 => 0, U9693021 => 2, U9693022 => 2, U9693023 => 2, U9693024 => 0, U9693025 => 2, U9693028 => 2, U9693029 => 0, U9693030 => 2, U9693031 => 2, U9693032 => 0, U9693033 => 2, U9693034 => 2, U9693035 => 2, U9693036 => 2, U9693037 => 2, U9693038 => 2, U9693039 => 0, U9693040 => 2, U9693041 => 2, U9693042 => 2, U9693043 => 2, U9693044 => 2, U9693045 => 2, U9693046 => 2, U9693047 => 2, U9693048 => 2, U9693050 => 0, U9693052 => 2, U9693053 => 2, U9693054 => 2, U9693055 => 0 },
           11 => {
N9561713 => 0, N9561725 => 0, N9561741 => 0, N9561759 => 0, N9561761 => 2, N9561764 => 2, U9693001 => 0, U9693002 => 2, U9693003 => 2, U9693004 => 2, U9693005 => 0, U9693006 => 2, U9693007 => 0, U9693008 => 0, U9693009 => 2, U9693011 => 2, U9693012 => 0, U9693013 => 2, U9693015 => 2, U9693016 => 2, U9693017 => 2, U9693018 => 2, U9693020 => 2, U9693021 => 2, U9693022 => 2, U9693023 => 2, U9693024 => 0, U9693025 => 2, U9693028 => 2, U9693029 => 0, U9693030 => 2, U9693031 => 1, U9693032 => 0, U9693033 => 2, U9693034 => 2, U9693035 => 0, U9693036 => 0, U9693037 => 2, U9693038 => 2, U9693039 => 2, U9693040 => 2, U9693041 => 2, U9693042 => 2, U9693043 => 2, U9693044 => 0, U9693045 => 2, U9693046 => 2, U9693047 => 2, U9693048 => 2, U9693050 => 2, U9693052 => 2, U9693053 => 2, U9693054 => 2, U9693055 => 0 },
           12 => {
N9561713 => 0, N9561725 => 0, N9561741 => 0, N9561759 => 0, N9561761 => 2, N9561764 => 0, U9693001 => 0, U9693002 => 2, U9693003 => 2, U9693004 => 2, U9693005 => 2, U9693006 => 2, U9693007 => 0, U9693008 => 0, U9693009 => 0, U9693011 => 1, U9693012 => 0, U9693013 => 0, U9693015 => 0, U9693016 => 0, U9693017 => 0, U9693018 => 0, U9693020 => 2, U9693021 => 2, U9693022 => 0, U9693023 => 2, U9693024 => 0, U9693025 => 2, U9693028 => 2, U9693029 => 0, U9693030 => 2, U9693031 => 2, U9693032 => 2, U9693033 => 1, U9693034 => 2, U9693035 => 2, U9693036 => 2, U9693037 => 2, U9693038 => 0, U9693039 => 0, U9693040 => 2, U9693041 => 2, U9693042 => 2, U9693043 => 0, U9693044 => 0, U9693045 => 2, U9693046 => 2, U9693047 => 2, U9693048 => 0, U9693050 => 0, U9693052 => 1, U9693053 => 0, U9693054 => 2, U9693055 => 0 },
           13 => {
N9561713 => 0, N9561725 => 0, N9561741 => 0, N9561759 => 0, N9561761 => 2, N9561764 => 0, U9693001 => 0, U9693002 => 0, U9693003 => 0, U9693004 => 0, U9693005 => 0, U9693006 => 0, U9693007 => 0, U9693008 => 0, U9693009 => 0, U9693011 => 2, U9693012 => 0, U9693013 => 2, U9693015 => 0, U9693016 => 0, U9693017 => 2, U9693018 => 0, U9693020 => 0, U9693021 => 0, U9693022 => 0, U9693023 => 2, U9693024 => 0, U9693025 => 2, U9693028 => 2, U9693029 => 0, U9693030 => 2, U9693031 => 0, U9693032 => 0, U9693033 => 2, U9693034 => 2, U9693035 => 0, U9693036 => 2, U9693037 => 0, U9693038 => 0, U9693039 => 0, U9693040 => 2, U9693041 => 2, U9693042 => 2, U9693043 => 0, U9693044 => 2, U9693045 => 0, U9693046 => 2, U9693047 => 0, U9693048 => 0, U9693050 => 0, U9693052 => 2, U9693053 => 2, U9693054 => 2, U9693055 => 0 },
           14 => {
N9561713 => 0, N9561725 => 0, N9561741 => 0, N9561759 => 2, N9561761 => 2, N9561764 => 2, U9693001 => 2, U9693002 => 2, U9693003 => 2, U9693004 => 2, U9693005 => 2, U9693006 => 2, U9693007 => 2, U9693008 => 0, U9693009 => 0, U9693011 => 2, U9693012 => 2, U9693013 => 2, U9693015 => 2, U9693016 => 2, U9693017 => 2, U9693018 => 0, U9693020 => 2, U9693021 => 0, U9693022 => 2, U9693023 => 2, U9693024 => 0, U9693025 => 2, U9693028 => 2, U9693029 => 0, U9693030 => 2, U9693031 => 2, U9693032 => 0, U9693033 => 2, U9693034 => 2, U9693035 => 0, U9693036 => 2, U9693037 => 2, U9693038 => 2, U9693039 => 2, U9693040 => 2, U9693041 => 2, U9693042 => 2, U9693043 => 1, U9693044 => 2, U9693045 => 2, U9693046 => 2, U9693047 => 2, U9693048 => 2, U9693050 => 0, U9693052 => 0, U9693053 => 2, U9693054 => 2, U9693055 => 0 },
           16 => {
N9561713 => 0, N9561725 => 0, N9561741 => 0, N9561759 => 2, N9561761 => 2, N9561764 => 2, U9693001 => 2, U9693002 => 2, U9693003 => 2, U9693004 => 2, U9693005 => 0, U9693006 => 2, U9693007 => 2, U9693008 => 0, U9693009 => 2, U9693011 => 2, U9693012 => 2, U9693013 => 2, U9693015 => 0, U9693016 => 2, U9693017 => 0, U9693018 => 0, U9693020 => 2, U9693021 => 2, U9693022 => 2, U9693023 => 2, U9693024 => 0, U9693025 => 2, U9693028 => 2, U9693029 => 2, U9693030 => 2, U9693031 => 2, U9693032 => 0, U9693033 => 2, U9693034 => 2, U9693035 => 0, U9693036 => 2, U9693037 => 2, U9693038 => 2, U9693039 => 0, U9693040 => 2, U9693041 => 2, U9693042 => 2, U9693043 => 2, U9693044 => 2, U9693045 => 2, U9693046 => 2, U9693047 => 2, U9693048 => 0, U9693050 => 0, U9693052 => 0, U9693053 => 2, U9693054 => 2, U9693055 => 0 },
           17 => {
N9561713 => 0, N9561725 => 0, N9561741 => 2, N9561759 => 2, N9561761 => 2, N9561764 => 0, U9693001 => 2, U9693002 => 0, U9693003 => 2, U9693004 => 2, U9693005 => 0, U9693006 => 2, U9693007 => 2, U9693008 => 0, U9693009 => 2, U9693011 => 2, U9693012 => 0, U9693013 => 2, U9693015 => 0, U9693016 => 2, U9693017 => 2, U9693018 => 2, U9693020 => 2, U9693021 => 2, U9693022 => 2, U9693023 => 2, U9693024 => 0, U9693025 => 2, U9693028 => 2, U9693029 => 2, U9693030 => 2, U9693031 => 2, U9693032 => 0, U9693033 => 2, U9693034 => 2, U9693035 => 1, U9693036 => 2, U9693037 => 2, U9693038 => 2, U9693039 => 0, U9693040 => 2, U9693041 => 2, U9693042 => 2, U9693043 => 0, U9693044 => 2, U9693045 => 2, U9693046 => 2, U9693047 => 2, U9693048 => 2, U9693050 => 0, U9693052 => 0, U9693053 => 0, U9693054 => 2, U9693055 => 0 }
         }, 'homework' );
is($h->roundMax, 2, 'max hw score');
is($h->total('N9561764'), 16, 'only Brian has hw score');
is($h->percent('N9561764'), 72.7272727272727, "Brian's grade");
